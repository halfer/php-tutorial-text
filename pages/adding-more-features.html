

<h2>Adding more features</h2>

<p>
	It is normal practice to link the main heading of a website to the home page, as this makes
	for a consistent navigation experience. So, let's do that now:
</p>

<?php renderDiffFromComment('Make title link to the home page') ?>

<p>
	Next, let us add in some logic that interprets two carriage-returns in a post as a paragraph
	break. Here we go:
</p>

<?php if (showTodoMessages()): ?>
	<div class="todo">
		We have a closing <code>div</code> here that probably has only changed in whitespace terms.
		Remove this error.
	</div>
<?php endif ?>

<?php renderDiffFromComment('Put in real paragraphs in the article view') ?>

<p>
	Now, the default date style used around the application isn't very readable, so let's
	improve that now:
</p>

<?php renderDiffFromComment('Format the dates nicely') ?>

<p>
	Now we've done a bit of tidying, let's tackle a bigger item of functionality. We need
	to allow users to comment on articles, so let's make the necessary database changes to
	prepare for that:
</p>

<?php renderDiffFromComment('Add comments to fixtures') ?>

<p>
	Since this involves database changes, we'll need to delete our database file, and re-run
	the installer. So, delete the file in <span class="filename">data/data.sqlite</span> and then
	reinstall by visiting <code>http://localhost/install.php</code> again.
</p>

<p>
	You might ask why we are putting so much effort into an installer when we're nowhere
	near having a piece of finished software. The answer is that this installer is for us,
	the developers, and not for end users. Thus, it is something we want to set up reasonably
	early in our development lifecycle; whenever a database change is made, we want to be able
	to recreate our useful test data quickly and easily.
</p>

<p>
	Now we're ready to start adding some comment-related changes. To start with, let's add
	a count of comments on the front page. This uses the SQL command <code>COUNT()</code> to count
	the number of rows that would be returned by a query:
</p>

<?php renderDiffFromComment('Add comment counts to front page') ?>

<p>
	Also, we'll add a comment listing to individual post pages:
</p>

<?php renderDiffFromComment('Add comments/count to view post page') ?>

<p>
	So, give that a whirl. You will want to check the new count on the homepage, and the comments
	feature on individual posts. How's that looking?
</p>

